<section class="row">
  <h1 class="small-12 columns">Upload Syllabi</h1>
</section>

<section class="row">
  <div class="small-12 columns">
    <paper-material elevation="2" style="background: #fff; padding: 10px 20px;">
      <%= label_tag nil, 'Syllabus Documents', class: 'required' %>
      <div id="upload-syllabi" style="border: 1px dashed #ccc;" class="dropzone"></div>
    </paper-material>
    <hr>

    <div id="uploaded-syllabi-container" class="hide">
      <paper-material elevation="1" style="background: #fff; padding: 10px 20px;">
        <div id="uploaded-syllabi">

        </div>
      </paper-material>
      <hr>
    </div>
  </div>

  <!-- TEMP -->
  <script type="text/javascript">
    var myDropzone = new Dropzone("div#upload-syllabi", { 
      url: "<%= syllabi_path() %>",
      paramName: "syllabus[document]",
      dictDefaultMessage: 'Drop files here or click to upload. <br>The server will attempt to determine the course, term and instructor automatically.',
      init: function() {
        this.on("success", function(file, response) {
          console.log(file);
          console.log(response);
          $('#uploaded-syllabi-container').show();

          $('#uploaded-syllabi').append(response.syllabiPartial)
        });
        this.on("error", function(file) {
          $('#uploaded-syllabi-container').show();
          $('#uploaded-syllabi').append('<div class="notice error">There was an error while uploading <span class="filename">' + file.name + '</span>. Please make sure the file is either a PDF or text document.</div>');
        });
      }
    });
  </script>
  <!-- END TEMP -->
</section>


<!-- if not javascript -->
<%#= render 'form' %>

<section class="row">
  <div class="small-12 columns">
    <%= link_to 'Done', syllabi_path %>
  </div>
</section>
